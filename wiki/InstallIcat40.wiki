#summary Installation instructions for ICAT 4.0

= Installation instructions for ICAT 4.0 =

See also Icat4InstallDependencies.

{{{
In order to make it simple to install ICAT40, the following configuration is assumed:

Operating system:

operation system: linux
username: glassfish3
home directory: /home/glassfish3
shell: bash
note: the operating system user glassfish3 is running the glassfish server and the applications.

Glassfish server:

directory: /home/glassfish3/glassfish3/glassfish
admin user: admin
admin user password: adminadmin
asadmin command: The operating system user called glassfish3 has asadmin on the PATH 
ojdbc14.jar: The file ojdbc14.jar has been added to /home/glassfish3/glassfish3/glassfish/domains/domain1/lib
icat.properties: The file icat.properties has been added to /home/glassfish3/glassfishv3/glassfish/domains/domain1/config

Oracle tools:
sqlplus: The operating system user glassfish3 has sqlplus on the PATH

Oracle database server: localhost
ICAT username/ password: icat/myicatpasswd
ICATUSER username/password: icatuser/myicatuserpasswd

Java run-time: 
java: The operating system user glassfish3 has java on the PATH

Directories:
icat40 - this contains a scripts called glassfish and glassfish.props which tell the glassfish server what to do
icat40/orainit - this contains scripts to initialise the database
icat40/usertable_init - this contains a script to add a user to ICAT
icat40/test_icat - this contains a simple test for ICAT

The following files are part of the ICAT 4.0 distribution
icat-http.ear
icat.ear

Server certficate:
Neither the server nor a client application require a certificate, as icat-http is deployed using http protocol.

Ports:
The port 8080 is available for the glassfish server to deploy icat-http
The port 4848 is available for the the admin console of glassfish

Configuration information:

Configuration is stored in the following files:
icat40/glassfish.props
icat40/passwordfile
icat40/usertable_init/usertable.sh
icat40/test_icat/example.properties

Instructions:

Create a test environment similar to the one assumed.  If it is not possible to be identical, then the four files containing configuration may require changes.

Ensure the following conditions on the system: 

- Database server running, and the username and passwords installed, but no content;
- Glassfish server installed, but not running;
- Expand the distribution file into a directory; icat40 is used in the following instructions.

Do the following:

# Initialise the tables in the database - this will remove any existing content.

cd icat40/orainit
sqlplus icat/myicatpasswd@localhost         @create_icat.sql     | tee create_icat.log
cd ../..

# Start the glassfish server, create the database pools and deploy icat.
# Deploying icat also creates the schema for icatuser, but does not give
# it useful content.

cd icat40
./glassfish start
./glassfish create
./glassfish deploy icat
cd ..

# Create a user for use by the test
cd icat40/usertable_init
./usertable.sh
cd ../..

# Run the test which does logon to the icat

cd icat40/test_icat
./test_one.sh Authenticate
cd ..

# If all is well, then ICAT is working

To stop icat and the glassfish server, do the following:

cd icat40
./glassfish undeploy icat
./glassfish delete
./glassfish stop

}}}

== - the end - ==
