#summary Cog-kit configuration for ICAT.
#labels Icat-Security
= Cog-kit configuration for ICAT=

Author: Shirley Crompton

Date:   21 August 2008

== Introduction  ==

This document summarises the main steps in configuring the cog-kit for the icat-api use.  You can install cog-kit after you have installed icat-api and the data portal.  You only need the cog-kit for run-time operation.

== Procedures  ==
  #  Download the cog-kit binary from http://www.cogkit.org/php/download.html. 
  #  Extract to a folder on the server where you have installed the icat-api and data portal.
  #  Set the COG_HOME environment variable to point to this folder.
  #  Place the UK e-Science CA and UK e-Science Root certificates and signing policies (see http://www.ngs.ac.uk/cacerts) in a local folder (I've put them in $COG_HOME/etc/grid-security/certificates)
  #  Place your _host_ or _user_cert.pem and matching key.pem files in a folder accessible by cog-kit.  (I've left them in the 'USER_HOME'/.globus folder)  
  #  Run the cog-kit gui configuration tool - 'COG_HOME'/bin/cog-setup.
  #  Setup Step 1 Agree to licence terms.
  #  Setup Step 2 Register your cog-kit.
  #  Setup Step 3 Fill in project information.
  #  Setup Step 4 Start a new configuration.
  #  Setup Step 5 Enter the location of your GSI certificate (see Step 5. above).
  #  Setup Step 6 Enter the location of your private key (see Step 5. above).
  #  Setup Step 7 Add the UK CA certifcates and signing policies by adding the location to these files (see Step 4. above).
  #  Setup Step 8 Local Proxy location - accept the default or set your own location.
  #  Setup Step 9 Check and update your ip address if necessary.
  #  Setup Step 10 Verify and update the machine date if necessary.
  #  Setup Step 11 Choose where you want to save the properties file to (I accept the default location - 'USER_HOME'/.globus folder).

== Test your configuration  ==
  #  Run 'COG_HOME'/bin/grid-proxy-init to obtain a grid proxy.  Enter your passphrase as prompted.
  #  Run 'COG_HOME'/bin/grid-proxy-info to inspect the proxy info.

== Create pass file  ==
Assuming that things are working OK, you will just need to store your phassphrase in a java properties file and put that in the same folder as your certificate and key pem files (see Step 5 above).  The file must be named 'pass' and contains a property named 'pass'.  *Well, not super safe, I hear you say ....wouldn't it be better to store this as an encrypted item in the database?

== See Also == 
 * [https://ca.grid-support.ac.uk/cgi-bin/pub/pki?cmd=getStaticPage&name=index Request a certificate.] 
 * [http://www.grid-support.ac.uk/content/view/378/276/ How to prepare your certificate to use with Globus]

== Final Note ==
You do not need to have a current grid proxy to run icat.